on post-fs
    mount none /dev/null /vendor/lib64/hw/power.default.so bind
    mount none /dev/null /vendor/lib/hw/power.default.so bind
    mount none /system/etc/wifi/WCNSS_qcom_cfg.ini /mnt/vendor/persist/WCNSS_qcom_cfg.ini bind
    mkdir /mnt/vendor/persist/empty_dir
    mount none /mnt/vendor/persist/empty_dir /vendor/overlay bind

on init
    # Drop write bit from cpu_min_freq so that libqti-perfd can't set it
    chmod 0444 /sys/module/msm_performance/parameters/cpu_min_freq

    #Qicai.Gu@PSW.BSP.TP.Function 2019-06-14 add for limit_enable
    chown system system /proc/touchpanel/oppo_tp_limit_enable
    chown system system /proc/touchpanel/oppo_tp_limit_area
    chown system system /proc/touchpanel/tp_fw_update
    write /proc/touchpanel/oppo_tp_limit_enable 0

    chown system system /proc/touchpanel/oppo_tp_direction
    write /proc/touchpanel/oppo_tp_direction 1

    chown system system /proc/touchpanel/DOZE_STATUS
    chmod 0444 /proc/touchpanel/DOZE_STATUS

    # Boot time FS tune
    write /sys/block/sda/queue/iostats 0
    write /sys/block/sda/queue/scheduler cfq
    write /sys/block/sda/queue/iosched/slice_idle 0
    write /sys/block/sda/queue/read_ahead_kb 2048
    write /sys/block/sda/queue/nr_requests 256
    write /sys/block/sdf/queue/iostats 0
    write /sys/block/sdf/queue/scheduler cfq
    write /sys/block/sdf/queue/iosched/slice_idle 0
    write /sys/block/sdf/queue/read_ahead_kb 2048
    write /sys/block/sdf/queue/nr_requests 256
    write /sys/block/dm-0/queue/read_ahead_kb 2048
    write /sys/block/dm-1/queue/read_ahead_kb 2048
    write /sys/block/dm-2/queue/read_ahead_kb 2048

on boot
    #for goodix_fp.
    chown system system /dev/goodix_fp

#Fanhong.Kong@ProDrv.CHG,add 2018/9/25 for vib aw8697
#change ownership and premission for awinic haptic shock with music
    chown system audio /dev/aw8697_haptic
    chmod 0660 /dev/aw8697_haptic
    chown system audio /sys/class/leds/vibrator/haptic_audio
    chmod 0660 /sys/class/leds/vibrator/haptic_audio
    mkdir /data/awinic 0770 system audio

    # enable awinic haptic sync wirh audio algo
    setprop audio.awinic.haptic.support  false

#tongfeng.Huang@PSW.BSP.CHG.Basic, 2018/12/03,  Add for vibration dev file
    chown system system /sys/class/leds/vibrator/f0
    chown system system /sys/class/leds/vibrator/cali
    chown system system /sys/class/leds/vibrator/vmax
    chown system system /sys/class/leds/vibrator/index
    chown system system /sys/class/leds/vibrator/loop
    chown system system /sys/class/leds/vibrator/lra_resistance
    chown system system /sys/class/leds/vibrator/ram_update
    chown system audio /sys/class/leds/vibrator/rtp
    chmod 0660 /sys/class/leds/vibrator/rtp
    chown system system /sys/class/leds/vibrator/seq
    chown system system /sys/class/leds/vibrator/motor_old
    chown system system /sys/class/leds/vibrator/waveform_index
    chown system system /sys/class/leds/vibrator/osc_cali
    chown system system /sys/class/leds/vibrator/osc_data
    chown system system /sys/class/leds/vibrator/ram_test

    # load haptic fw
    write /sys/class/leds/vibrator/ram_update 1

    chown system system /sys/class/leds/vibrator/trigger
    chown system system /sys/class/leds/vibrator/activate
    chown system system /sys/class/leds/vibrator/brightness
    chown system system /sys/class/leds/vibrator/duration
    chown system system /sys/class/leds/vibrator/state
    chown system system /sys/class/timed_output/vibrator/enable

#Jianchao.Shi@PSW.BSP.CHG.Basic, 2017/09/08, sjc Add for short_c_batt
    chown system system /sys/class/power_supply/battery/short_c_batt_in_idle
    chown system system /sys/class/power_supply/battery/short_c_batt_update_change
    chown system system /sys/class/power_supply/battery/short_c_hw_feature
    chown system system /sys/class/power_supply/battery/short_c_batt_limit_chg
    chown system system /sys/class/power_supply/battery/short_c_batt_limit_rechg
    chown system system /sys/class/power_supply/battery/short_ic_volt_thresh
    chown system system /sys/class/power_supply/battery/short_ic_otp_status
    chown system system /sys/class/power_supply/battery/ship_mode
    chown system system /sys/class/power_supply/battery/cool_down
    chmod  0666 /sys/class/power_supply/battery/call_mode
    chown system system /sys/class/power_supply/battery/call_mode

    #Liangxiang.Liu@AD.Power.PowerMonitor, 2018/02/08, Add for wakeup_stastisc reset
    chown system system /sys/kernel/wakeup_reasons/wakeup_stastisc_reset
    chmod 0664 /sys/kernel/wakeup_reasons/wakeup_stastisc_reset

#tongfeng.Huang@PSW.BSP.CHG.Basic, 2019/04/22,  Add for tbatt power off
    chown system system /proc/tbatt_pwroff

#Xuefeng.Peng@PSW.AD.Usb.1410703, 2018/06/19, Add for support NDIS 5.0
    write /config/usb_gadget/g1/functions/gsi.rndis/rndis_class_id 1

    chown system system /sys/kernel/oppo_display/notify_panel_blank
    chmod 0666 /sys/kernel/oppo_display/notify_panel_blank

    # Disable performance profile by default
    setprop perf_profile 0

# Balanced
on property:perf_profile=0

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq 1785600
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq 2419200
    write /sys/devices/system/cpu/cpu7/cpufreq/scaling_max_freq 2956800
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq 300000
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq 300000
    write /sys/devices/system/cpu/cpu7/cpufreq/scaling_min_freq 825600

    write /sys/devices/system/cpu/cpufreq/policy0/scaling_min_freq 300000
    write /sys/devices/system/cpu/cpufreq/policy4/scaling_min_freq 710400

    write /sys/module/cpu_boost/parameters/input_boost_freq "0:1036800"
    write /sys/module/cpu_boost/parameters/input_boost_ms 20

    write /sys/class/kgsl/kgsl-3d0/devfreq/min_freq 180000000
    write /sys/class/kgsl/kgsl-3d0/devfreq/max_freq 499200000

    write /proc/sys/kernel/sched_upmigrate "96 88"
    write /proc/sys/kernel/sched_downmigrate "55 66"

    write /proc/sys/vm/swappiness 100

    # thermalzone28
    write /sys/class/thermal/thermal_zone28/cdev0_lower_limit 03
    write /sys/class/thermal/thermal_zone28/cdev0_upper_limit 03
    write /sys/class/thermal/thermal_zone28/cdev1_lower_limit 01
    write /sys/class/thermal/thermal_zone28/cdev1_upper_limit 01

    # thermalzone29
    write /sys/class/thermal/thermal_zone29/cdev0_lower_limit 03
    write /sys/class/thermal/thermal_zone29/cdev0_upper_limit 03
    write /sys/class/thermal/thermal_zone29/cdev1_lower_limit 01
    write /sys/class/thermal/thermal_zone29/cdev1_upper_limit 01

    # thermalzone30
    write /sys/class/thermal/thermal_zone30/cdev0_lower_limit 03
    write /sys/class/thermal/thermal_zone30/cdev0_upper_limit 03
    write /sys/class/thermal/thermal_zone30/cdev1_lower_limit 01
    write /sys/class/thermal/thermal_zone30/cdev1_upper_limit 01

    # thermalzone31
    write /sys/class/thermal/thermal_zone31/cdev0_lower_limit 03
    write /sys/class/thermal/thermal_zone31/cdev0_upper_limit 03
    write /sys/class/thermal/thermal_zone31/cdev1_lower_limit 01
    write /sys/class/thermal/thermal_zone31/cdev1_upper_limit 01

    # thermalzone56
    write /sys/class/thermal/thermal_zone56/cdev0_lower_limit 02
    write /sys/class/thermal/thermal_zone56/cdev0_upper_limit 02
    write /sys/class/thermal/thermal_zone56/cdev1_lower_limit 17
    write /sys/class/thermal/thermal_zone56/cdev1_upper_limit 17
    write /sys/class/thermal/thermal_zone56/cdev2_lower_limit 17
    write /sys/class/thermal/thermal_zone56/cdev2_upper_limit 17

    # thermalzone57
    write /sys/class/thermal/thermal_zone57/cdev0_lower_limit 04
    write /sys/class/thermal/thermal_zone57/cdev0_upper_limit 04
    write /sys/class/thermal/thermal_zone57/cdev1_lower_limit 17
    write /sys/class/thermal/thermal_zone57/cdev1_upper_limit 17
    write /sys/class/thermal/thermal_zone57/cdev2_lower_limit 21
    write /sys/class/thermal/thermal_zone57/cdev2_upper_limit 21

    # thermalzone58
    write /sys/class/thermal/thermal_zone58/cdev0_lower_limit 02
    write /sys/class/thermal/thermal_zone58/cdev0_upper_limit 02
    write /sys/class/thermal/thermal_zone58/cdev1_lower_limit 17
    write /sys/class/thermal/thermal_zone58/cdev1_upper_limit 17
    write /sys/class/thermal/thermal_zone58/cdev2_lower_limit 17
    write /sys/class/thermal/thermal_zone58/cdev2_upper_limit 17

    # thermalzone59
    write /sys/class/thermal/thermal_zone59/cdev0_lower_limit 04
    write /sys/class/thermal/thermal_zone59/cdev0_upper_limit 04
    write /sys/class/thermal/thermal_zone59/cdev1_lower_limit 17
    write /sys/class/thermal/thermal_zone59/cdev1_upper_limit 17
    write /sys/class/thermal/thermal_zone59/cdev2_lower_limit 21
    write /sys/class/thermal/thermal_zone59/cdev2_upper_limit 21

    # thermalzone60
    write /sys/class/thermal/thermal_zone60/cdev0_lower_limit 05
    write /sys/class/thermal/thermal_zone60/cdev0_upper_limit 05

    # thermalzone61
    write /sys/class/thermal/thermal_zone62/cdev0_lower_limit 02
    write /sys/class/thermal/thermal_zone62/cdev0_upper_limit 02
    write /sys/class/thermal/thermal_zone62/cdev1_lower_limit 17
    write /sys/class/thermal/thermal_zone62/cdev1_upper_limit 17
    write /sys/class/thermal/thermal_zone62/cdev2_lower_limit 17
    write /sys/class/thermal/thermal_zone62/cdev2_upper_limit 17

    # thermalzone63
    write /sys/class/thermal/thermal_zone63/cdev0_lower_limit 04
    write /sys/class/thermal/thermal_zone63/cdev0_upper_limit 04
    write /sys/class/thermal/thermal_zone63/cdev1_lower_limit 17
    write /sys/class/thermal/thermal_zone63/cdev1_upper_limit 17
    write /sys/class/thermal/thermal_zone63/cdev2_lower_limit 21
    write /sys/class/thermal/thermal_zone63/cdev2_upper_limit 21

    # thermalzone64
    write /sys/class/thermal/thermal_zone64/cdev0_lower_limit 05
    write /sys/class/thermal/thermal_zone64/cdev0_upper_limit 05

    # thermalzone67
    write /sys/class/thermal/thermal_zone67/cdev0_lower_limit 00
    write /sys/class/thermal/thermal_zone67/cdev0_upper_limit 12
    write /sys/class/thermal/thermal_zone67/cdev1_lower_limit 00
    write /sys/class/thermal/thermal_zone67/cdev1_upper_limit 15

# Gaming
on property:perf_profile=1

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq 1785600
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq 2419200
    write /sys/devices/system/cpu/cpu7/cpufreq/scaling_max_freq 2956800
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq 300000
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq 300000
    write /sys/devices/system/cpu/cpu7/cpufreq/scaling_min_freq 825600

    write /sys/module/cpu_boost/parameters/input_boost_freq "0:1036800"
    write /sys/module/cpu_boost/parameters/input_boost_ms 20

    write /sys/class/kgsl/kgsl-3d0/devfreq/min_freq 180000000
    write /sys/class/kgsl/kgsl-3d0/devfreq/max_freq 675000000

    write /proc/sys/kernel/sched_upmigrate "60 60"
    write /proc/sys/kernel/sched_downmigrate "40 40"

    write /proc/sys/vm/swappiness 1

    # thermalzone28
    write /sys/class/thermal/thermal_zone28/cdev0_lower_limit 00
    write /sys/class/thermal/thermal_zone28/cdev0_upper_limit 00
    write /sys/class/thermal/thermal_zone28/cdev1_lower_limit 00
    write /sys/class/thermal/thermal_zone28/cdev1_upper_limit 00

    # thermalzone29
    write /sys/class/thermal/thermal_zone29/cdev0_lower_limit 00
    write /sys/class/thermal/thermal_zone29/cdev0_upper_limit 00
    write /sys/class/thermal/thermal_zone29/cdev1_lower_limit 00
    write /sys/class/thermal/thermal_zone29/cdev1_upper_limit 00

    # thermalzone30
    write /sys/class/thermal/thermal_zone30/cdev0_lower_limit 00
    write /sys/class/thermal/thermal_zone30/cdev0_upper_limit 00
    write /sys/class/thermal/thermal_zone30/cdev1_lower_limit 00
    write /sys/class/thermal/thermal_zone30/cdev1_upper_limit 00

    # thermalzone31
    write /sys/class/thermal/thermal_zone31/cdev0_lower_limit 00
    write /sys/class/thermal/thermal_zone31/cdev0_upper_limit 00
    write /sys/class/thermal/thermal_zone31/cdev1_lower_limit 00
    write /sys/class/thermal/thermal_zone31/cdev1_upper_limit 00

    # thermalzone56
    write /sys/class/thermal/thermal_zone56/cdev0_lower_limit 00
    write /sys/class/thermal/thermal_zone56/cdev0_upper_limit 00
    write /sys/class/thermal/thermal_zone56/cdev1_lower_limit 06
    write /sys/class/thermal/thermal_zone56/cdev1_upper_limit 06
    write /sys/class/thermal/thermal_zone56/cdev2_lower_limit 06
    write /sys/class/thermal/thermal_zone56/cdev2_upper_limit 06

    # thermalzone57
    write /sys/class/thermal/thermal_zone57/cdev0_lower_limit 00
    write /sys/class/thermal/thermal_zone57/cdev0_upper_limit 00
    write /sys/class/thermal/thermal_zone57/cdev1_lower_limit 06
    write /sys/class/thermal/thermal_zone57/cdev1_upper_limit 06
    write /sys/class/thermal/thermal_zone57/cdev2_lower_limit 06
    write /sys/class/thermal/thermal_zone57/cdev2_upper_limit 06

    # thermalzone58
    write /sys/class/thermal/thermal_zone58/cdev0_lower_limit 00
    write /sys/class/thermal/thermal_zone58/cdev0_upper_limit 00
    write /sys/class/thermal/thermal_zone58/cdev1_lower_limit 06
    write /sys/class/thermal/thermal_zone58/cdev1_upper_limit 06
    write /sys/class/thermal/thermal_zone58/cdev2_lower_limit 06
    write /sys/class/thermal/thermal_zone58/cdev2_upper_limit 06

    # thermalzone59
    write /sys/class/thermal/thermal_zone59/cdev0_lower_limit 00
    write /sys/class/thermal/thermal_zone59/cdev0_upper_limit 00
    write /sys/class/thermal/thermal_zone59/cdev1_lower_limit 06
    write /sys/class/thermal/thermal_zone59/cdev1_upper_limit 06
    write /sys/class/thermal/thermal_zone59/cdev2_lower_limit 06
    write /sys/class/thermal/thermal_zone59/cdev2_upper_limit 06

    # thermalzone60
    write /sys/class/thermal/thermal_zone60/cdev0_lower_limit 00
    write /sys/class/thermal/thermal_zone60/cdev0_upper_limit 00

    # thermalzone62
    write /sys/class/thermal/thermal_zone62/cdev0_lower_limit 00
    write /sys/class/thermal/thermal_zone62/cdev0_upper_limit 00
    write /sys/class/thermal/thermal_zone62/cdev1_lower_limit 06
    write /sys/class/thermal/thermal_zone62/cdev1_upper_limit 06
    write /sys/class/thermal/thermal_zone62/cdev2_lower_limit 06
    write /sys/class/thermal/thermal_zone62/cdev2_upper_limit 06

    # thermalzone63
    write /sys/class/thermal/thermal_zone63/cdev0_lower_limit 00
    write /sys/class/thermal/thermal_zone63/cdev0_upper_limit 00
    write /sys/class/thermal/thermal_zone63/cdev1_lower_limit 06
    write /sys/class/thermal/thermal_zone63/cdev1_upper_limit 06
    write /sys/class/thermal/thermal_zone63/cdev2_lower_limit 06
    write /sys/class/thermal/thermal_zone63/cdev2_upper_limit 06

    # thermalzone64
    write /sys/class/thermal/thermal_zone64/cdev0_lower_limit 00
    write /sys/class/thermal/thermal_zone64/cdev0_upper_limit 00

    # thermalzone67
    write /sys/class/thermal/thermal_zone67/cdev0_lower_limit 00
    write /sys/class/thermal/thermal_zone67/cdev0_upper_limit 06
    write /sys/class/thermal/thermal_zone67/cdev1_lower_limit 00
    write /sys/class/thermal/thermal_zone67/cdev1_upper_limit 06

on late-fs
    # Boot time FS tune
    write /sys/block/dm-3/queue/read_ahead_kb 2048

    # Runtime FS tuning: as we have init boottime setting and kernel patch setting
    # default readahead to 2048KB. We should adjust the setting upon boot_complete
    # for runtime performance
    write /sys/block/sda/queue/read_ahead_kb 128
    write /sys/block/sda/queue/nr_requests 128
    write /sys/block/sda/queue/iostats 1
    write /sys/block/sdf/queue/read_ahead_kb 128
    write /sys/block/sdf/queue/nr_requests 128
    write /sys/block/sdf/queue/iostats 1
    write /sys/block/dm-0/queue/read_ahead_kb 128
    write /sys/block/dm-1/queue/read_ahead_kb 128
    write /sys/block/dm-2/queue/read_ahead_kb 128
    write /sys/block/dm-3/queue/read_ahead_kb 128

on post-fs-data
    mkdir /data/system/audio 0775 media media

service vendor.imsdatadaemon /vendor/bin/imsdatadaemon
    override
    class main
    user radio
    socket ims_datad stream 0660 system radio
    group radio wifi inet vendor_qti_diag log
    disabled

on property:init.svc.cnss_diag=running
    stop cnss_diag

on property:init.svc.tcpdump=running
    stop tcpdump

on property:init.svc.vendor.ipacm-diag=running
    stop vendor.ipacm-diag
